{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/drewm/itinerary/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/drewm/itinerary/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/drewm/itinerary/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import'./Styles/Itinerary.css';import{useLocation}from'react-router-dom';import config from'../config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Itinerary(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var location=useLocation();var formData=location.state;var generateTimeSlots=function generateTimeSlots(startTime,endTime){var slots=[];var start=new Date(\"2024/01/01 \".concat(startTime));var end=new Date(\"2024/01/01 \".concat(endTime));var current=new Date(start);while(current<=end){slots.push(current.toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit',hour12:true}));current.setMinutes(current.getMinutes()+30);}return slots;};var timeSlots=formData?generateTimeSlots(formData.startTime,formData.endTime):[];useEffect(function(){var fetchItinerary=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,response,errorText,jsonData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(formData){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;console.log('Fetching with data:',formData);url=\"\".concat(config.apiUrl,\"/parameters/\").concat(formData.address,\"/\").concat(formData.city,\"/\").concat(formData.state,\"/\").concat(formData.zip,\"/\").concat(formData.radius,\"/\").concat(formData.priceRange);console.log('Fetching from URL:',url);_context.next=8;return fetch(url);case 8:response=_context.sent;if(response.ok){_context.next=14;break;}_context.next=12;return response.text();case 12:errorText=_context.sent;throw new Error(\"Server responded with \".concat(response.status,\": \").concat(errorText));case 14:_context.next=16;return response.json();case 16:jsonData=_context.sent;setData(jsonData);_context.next=24;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](2);console.error('Fetch error:',_context.t0);setError(_context.t0.message);case 24:_context.prev=24;setLoading(false);return _context.finish(24);case 27:case\"end\":return _context.stop();}},_callee,null,[[2,20,24,27]]);}));return function fetchItinerary(){return _ref.apply(this,arguments);};}();fetchItinerary();},[formData]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading your itinerary...\"});if(error)return/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[\"Error: \",error]});if(!formData)return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"No survey data found. Please complete the survey first.\"});var TimeSlot=/*#__PURE__*/React.memo(function(_ref2){var time=_ref2.time,event=_ref2.event;return/*#__PURE__*/_jsxs(\"div\",{className:\"time-slot\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"time\",children:time}),/*#__PURE__*/_jsx(\"div\",{className:\"event\",children:event||'Free Time'})]});});return/*#__PURE__*/_jsxs(\"div\",{className:\"itinerary-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"itinerary-header\",children:\"Your Daily Itinerary\"}),/*#__PURE__*/_jsx(\"div\",{className:\"timeline\",children:timeSlots.map(function(time){return/*#__PURE__*/_jsx(TimeSlot,{time:time,event:data[time]||'Free Time'},time);})})]});}","map":{"version":3,"names":["React","useEffect","useState","useLocation","config","jsx","_jsx","jsxs","_jsxs","Itinerary","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","location","formData","state","generateTimeSlots","startTime","endTime","slots","start","Date","concat","end","current","push","toLocaleTimeString","hour","minute","hour12","setMinutes","getMinutes","timeSlots","fetchItinerary","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","response","errorText","jsonData","wrap","_callee$","_context","prev","next","abrupt","console","log","apiUrl","address","city","zip","radius","priceRange","fetch","sent","ok","text","Error","status","json","t0","message","finish","stop","apply","arguments","className","children","TimeSlot","memo","_ref2","time","event","map"],"sources":["C:/Users/drewm/itinerary/src/Pages/Itinerary.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport './Styles/Itinerary.css'\r\nimport { useLocation } from 'react-router-dom'\r\nimport config from '../config'\r\n\r\nexport default function Itinerary() {\r\n    const [data, setData] = useState({})\r\n    const [loading, setLoading] = useState(true)\r\n    const [error, setError] = useState(null)\r\n    const location = useLocation()\r\n    const formData = location.state\r\n\r\n    const generateTimeSlots = (startTime, endTime) => {\r\n        const slots = [];\r\n        const start = new Date(`2024/01/01 ${startTime}`);\r\n        const end = new Date(`2024/01/01 ${endTime}`);\r\n        \r\n        let current = new Date(start);\r\n        while (current <= end) {\r\n            slots.push(current.toLocaleTimeString('en-US', {\r\n                hour: 'numeric',\r\n                minute: '2-digit',\r\n                hour12: true\r\n            }));\r\n            current.setMinutes(current.getMinutes() + 30);\r\n        }\r\n        return slots;\r\n    };\r\n\r\n    const timeSlots = formData ? generateTimeSlots(formData.startTime, formData.endTime) : [];\r\n\r\n    useEffect(() => {\r\n        const fetchItinerary = async () => {\r\n            if (!formData) return;\r\n            \r\n            try {\r\n                console.log('Fetching with data:', formData);\r\n                const url = `${config.apiUrl}/parameters/${formData.address}/${formData.city}/${formData.state}/${formData.zip}/${formData.radius}/${formData.priceRange}`;\r\n                console.log('Fetching from URL:', url);\r\n                \r\n                const response = await fetch(url);\r\n                if (!response.ok) {\r\n                    const errorText = await response.text();\r\n                    throw new Error(`Server responded with ${response.status}: ${errorText}`);\r\n                }\r\n                const jsonData = await response.json();\r\n                setData(jsonData);\r\n            } catch (err) {\r\n                console.error('Fetch error:', err);\r\n                setError(err.message);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchItinerary();\r\n    }, [formData]);\r\n\r\n    if (loading) return <div className=\"loading\">Loading your itinerary...</div>;\r\n    if (error) return <div className=\"error\">Error: {error}</div>;\r\n    if (!formData) return <div className=\"error\">No survey data found. Please complete the survey first.</div>;\r\n\r\n    const TimeSlot = React.memo(({ time, event }) => (\r\n        <div className=\"time-slot\">\r\n            <div className=\"time\">{time}</div>\r\n            <div className=\"event\">{event || 'Free Time'}</div>\r\n        </div>\r\n    ));\r\n\r\n    return (\r\n        <div className=\"itinerary-container\">\r\n            <h1 className=\"itinerary-header\">Your Daily Itinerary</h1>\r\n            <div className=\"timeline\">\r\n                {timeSlots.map(time => (\r\n                    <TimeSlot key={time} time={time} event={data[time] || 'Free Time'} />\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}